import{r as i,o as r,c as o,b as n,a as t,F as d,d as e,e as a}from"./app.922d555a.js";import{_ as c}from"./plugin-vue_export-helper.21dcd24c.js";const p={},l=n("h1",{id:"automatic-fixing-with-snyk-fix",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#automatic-fixing-with-snyk-fix","aria-hidden":"true"},"#"),e(" Automatic fixing with snyk fix")],-1),h=n("p",null,[e('{% hint style="info" %} This feature is currently in beta. We would appreciate any feedback you might have - contact us at '),n("a",{href:"mailto:snyk-fix-feedback@snyk.io"},"snyk-fix-feedback@snyk.io"),e(". {% endhint %}")],-1),u=e('{% hint style="info" %} Ensure you use the latest version of CLI ('),f={href:"https://github.com/snyk/snyk/releases/tag/v1.715.0",target:"_blank",rel:"noopener noreferrer"},m=e("v1.715.0"),b=e(" or later) to use "),g=n("code",null,"snyk fix",-1),y=e(". {% endhint %}"),x=a(`<p>The <code>snyk fix</code> command is a new CLI command to apply the recommended updates for supported ecosystems automatically.</p><p>When you use the <code>snyk test</code> command, actionable fixes for supported ecosystems appear in the scan results as shown in the example that follows.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Tested 78 dependencies for known issues, found 34 issues, 145 vulnerable paths.Issues to fix by upgrading dependencies:  Upgrade django@2.2.13 to django@2.2.22 to fix
  \u2717 HTTP Header Injection [High Severity][https://app.snyk.io/vuln/SNYK-PYTHON-DJANGO-1290072] in django@2.2.13
    introduced by django@2.2.13 and 13 other path(s)
  \u2717 Directory Traversal (new) [High Severity][https://app.snyk.io/vuln/SNYK-PYTHON-DJANGO-1298665] in django@2.2.13
    introduced by django@2.2.13 and 13 other path(s)
  \u2717 Insecure Permissions [High Severity][https://app.snyk.io/vuln/SNYK-PYTHON-DJANGO-609368] in django@2.2.13
    introduced by django@2.2.13 and 13 other path(s)
  \u2717 Insecure Permissions [High Severity][https://app.snyk.io/vuln/SNYK-PYTHON-DJANGO-609369] in django@2.2.13
    introduced by django@2.2.13 and 13 other path(s)Organization:           libs
Package manager:        poetry
Target file:            lib/poetry.lock
Project name:           libs-develop
Open source:            no
Project path:           lib
Licenses:               enabled
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>The following example shows the output of running <code>snyk fix</code>.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>\u25BA Running \`snyk test\` for /Users/lili/www/snyk/python-fix/packages/poetry/test/system/workspaces/with-pins\u2714 Looking for supported Python items
\u2714 Processed 1 pyproject.toml items
\u2714 DoneSuccessful fixes:  ../python-fix/packages/poetry/test/system/workspaces/with-pins/poetry.lock
  \u2714 Upgraded django from 2.2.13 to 2.2.18
  \u2714 Upgraded jinja2 from 2.11.2 to 2.11.3Summary:
  1 items were successfully fixed
  10 issues: 4 High | 3 Medium | 3 Low
  10 issues are fixable
  10 issues were successfully fixed
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>Note that only successful test results are forwarded to <code>snyk fix</code>. In addition, all unsupported ecosystem test results are skipped.</p><h2 id="enabling-snyk-fix" tabindex="-1"><a class="header-anchor" href="#enabling-snyk-fix" aria-hidden="true">#</a> Enabling snyk fix</h2><p>To enable snyk fix during the beta period, click on <strong>Settings</strong> BREAKING ALL THE IMAGES <a href="../../../.gitbook/assets/cog_icon.png"></a> &gt; <strong>Snyk Preview</strong>. Enable the <strong>snyk fix feature</strong> and click <strong>Save changes</strong>.</p><p>BREAKING ALL THE IMAGES <a href="../../.gitbook/assets/enabling-snyk-fix.jpg">Enabling Snyk fix in the Snyk Preview settings</a></p><p>The <code>snyk fix</code> command supports all the <code>snyk test</code> command options and has the following additional options:</p><ul><li><code>--quiet</code> - Suppress all output to the command line.</li><li><code>--dry-run</code> - Run almost all the logic and display output, but do not make the final changes to the relevant files. Show a preview of the changes.</li><li><code>--sequential</code> - Install each dependency update separately one at a time (the default is to install all at once). The default is much slower, but helps increase the number of successful updates by allowing some updates to fail and the process to continue.</li></ul><h2 id="python-support" tabindex="-1"><a class="header-anchor" href="#python-support" aria-hidden="true">#</a> Python support</h2><ul><li>Pip projects with <code>requirements.txt</code> files (or custom named files, for example <code>prod.txt</code>)</li><li>Pipenv projects with <code>Pipfile</code> and <code>Pipfile.lock</code> files</li><li>Poetry projects with <code>pyproject.toml</code> and <code>Poetry.lock</code> files</li></ul><h3 id="usage-examples" tabindex="-1"><a class="header-anchor" href="#usage-examples" aria-hidden="true">#</a> Usage examples</h3><p><code>snyk fix --file=requirements.txt</code></p><p><code>snyk fix --file=base.txt --package-manager=pip</code></p><p><code>snyk fix --all-projects</code></p><h3 id="requirements-with-r-directives" tabindex="-1"><a class="header-anchor" href="#requirements-with-r-directives" aria-hidden="true">#</a> Requirements with <code>-r</code> directives</h3><p>Where the <code>requirements.txt</code> looks like this, both <code>base.txt</code> and <code>requirements.txt</code> are updated if needed:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>-r base.txt # this means grab all the dependencies from here
django===1.6.1
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="direct-dependency-upgrades-dependencies-stated-in-the-manifest" tabindex="-1"><a class="header-anchor" href="#direct-dependency-upgrades-dependencies-stated-in-the-manifest" aria-hidden="true">#</a> <strong>Direct dependency upgrades (dependencies stated in the manifest)</strong></h4><p>Direct dependency upgrades are applied in the relevant files. All files referenced are found and updated.</p><h4 id="pins-transitive-dependencies-that-are-pulled-in-via-direct-dependencies" tabindex="-1"><a class="header-anchor" href="#pins-transitive-dependencies-that-are-pulled-in-via-direct-dependencies" aria-hidden="true">#</a> <strong>Pins (transitive dependencies that are pulled in via direct dependencies)</strong></h4><p>Pins are applied in the manifest file that was tested.</p><p>If multiple files are tested but are related (for example one requires the other), Snyk starts to apply changes to the files higher up in the directory structure.</p><p>Snyk detects previously fixed files and skips applying fixes to them again.</p><h3 id="projects-which-use-constraints-txt" tabindex="-1"><a class="header-anchor" href="#projects-which-use-constraints-txt" aria-hidden="true">#</a> Projects which use <code>constraints.txt</code></h3>`,27),v=e("Constraints files are requirements files that control only which version of a dependency is installed, not whether it is installed or not. Their syntax and contents are nearly identical to requirements files. There is one key difference: including a package in a constraints file does not trigger installation of the package. For more information, see "),k={href:"https://pip.pypa.io/en/stable/user_guide/#constraints-files",target:"_blank",rel:"noopener noreferrer"},_=e("User Guide - pip documentation v21.0.1"),w=e("."),j=a(`<h4 id="direct-dependency-upgrades-dependencies-stated-in-the-manifest-1" tabindex="-1"><a class="header-anchor" href="#direct-dependency-upgrades-dependencies-stated-in-the-manifest-1" aria-hidden="true">#</a> <strong>Direct dependency upgrades (dependencies stated in the manifest)</strong></h4><p>Direct dependency upgrades are applied in the relevant files. All files referenced are found and updated.</p><h4 id="pins-transitive-dependencies-that-are-pulled-in-via-direct-dependencies-1" tabindex="-1"><a class="header-anchor" href="#pins-transitive-dependencies-that-are-pulled-in-via-direct-dependencies-1" aria-hidden="true">#</a> <strong>Pins (transitive dependencies that are pulled in via direct dependencies)</strong></h4><p>All transitive dependencies are pinned in the <code>constraints.txt</code> file if referenced with the <code>-c</code> directive in the requirements manifest file.</p><h3 id="python-pipenv" tabindex="-1"><a class="header-anchor" href="#python-pipenv" aria-hidden="true">#</a> Python (<code>pipenv</code>)</h3><p>Snyk delegates to <code>pipenv</code> directly to update dependencies to the specified recommended versions. All <code>pipenv</code> environment variables and behaviors are preserved as much as possible.</p><h3 id="python-poetry" tabindex="-1"><a class="header-anchor" href="#python-poetry" aria-hidden="true">#</a> Python (<code>poetry</code>)</h3><p>Snyk delegates to <code>poetry</code> directly to update dependencies to the specified recommended versions. All <code>poetry</code> environment variables and behaviors are preserved as much as possible.</p><h2 id="troubleshooting" tabindex="-1"><a class="header-anchor" href="#troubleshooting" aria-hidden="true">#</a> Troubleshooting</h2><p>Run in debug mode to get more information on any errors.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>DEBUG=snyk snyk fix
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>This provides a very verbose output that can help diagnose issues or can be sent to Snyk for debugging.</p>`,12);function P(S,T){const s=i("ExternalLinkIcon");return r(),o(d,null,[l,h,n("p",null,[u,n("a",f,[m,t(s)]),b,g,y]),x,n("p",null,[v,n("a",k,[_,t(s)]),w]),j],64)}var I=c(p,[["render",P]]);export{I as default};
